# Основы Kotlin

### Функции

Объявление функций начинается с ключевого слова `fun`, за которым следует его имя. Далее следует список параметров в круглых скобках. Тип возвращаемого значения указывается после списка параметров и отделяется от него двоеточием.

> **Выражение и инструкции**  
> В языке _Kotlin_ `if` - это выражение, а не инструкция. Выражение имеет значение, которое можно использовать в других выражениях, в то время как инструкции всегда являются элементами верхнего уровня в охватывающем блоке и не имеют собственного значения. Большинство управляющих инструкций в _Kotlin_, кроме циклов (`for`, `do` и `do/while`), - **выражения**. Оператор присваивания `=` - **инструкция**.

Если тело функции заключено в фигурные скобки, то такая функция имеет _тело-блок (block body)_. Функция, возвращающая выражение напрямую, имеет _тело-выражение (expression body)_.

### Переменные

В _Kotlin_ объявление переменных начинается с ключевого слова, а тип можно указать (или не указать) после имени переменной.

Компилятор не сможет определить тип, если не дать ему никакой информации о значениях, которые могут быть присвоены этой переменной. Поэтому если в объявлении переменной отсутствует инициализирующее выражение, её тип нужно указать **явно**.

#### Изменяемые и неизменяемые переменные

Есть два ключевых слова для объявления переменной:

- `val` (от _value_) - неизменяемая ссылка. Переменной, объявленной с этим ключевым словом, нельзя присвоить значение после инициализации. Соответствует финальной переменной в _Java_.
- `var` (от _variable_) - изменяемая ссылка. Значение такой переменной можно изменить. Соответствует обычной (не финальной) переменной в _Java_.

Для приближения вашего кода к функциональному стилю необходимо стараться объявлять все переменные с ключевым словом `val`.

Переменная, объявленная с ключевым словом `val`, может быть инициализирована разными значениями в зависимости от некоторых условий, если компилятор сможет гарантировать, что выполнится только одно из инициализирующих выражений.

Несмотря на невозможность изменить ссылку `val`,  объект, на который она указывает,  может быть изменяемым.

Хотя ключевое слово `var` позволяет менять значение переменной, но её тип фиксирован. Компилятор определяет тип переменной только по инициализирующему выражению и не принимает во внимание всех последующих операций присваивания.

### Строковые шаблоны

_Строковые шаблоны (string templates)_ - особенность синтаксиса _Kotlin_, позволяющая использовать в строковых литералах ссылки на локальные переменные, добавляя к ним в начало символ `$`.

Чтобы включить в строку символ `$`, его нужно экранировать: `\$`

Также в строковых шаблонах можно использовать различные выражения, если заключить их в фигурные скобки `${}`

## Классы и свойства

Классы, содержащие только данные, без кода называют _объектами-значениями (value objects)_. Объявить такой класс можно так:
``` Kotlin
class Person(val name: String)
```
В это объявление сразу входить определение конструктора класса, а также объявление всех свойств класса, указанных в аргументах.

В _Kotlin_ область видимости `public` принята по умолчанию.

### Свойства

_Свойство (property)_ - сочетание поля и методов доступа.  `val`-свойство доступно только для чтения (определен только метод чтения), а `var`-свойство доступно для изменения (также определен метод для записи).

Свойство `name`, объявленное на языке _Kotlin_, доступно _Java_-коду через метод доступа с именем `getName`. В правилах именования методов доступа есть _исключение_: если имя свойства начинается с префикса `is`, никаких дополнительных префиксов для образования имени метода чтения не добавляется, а в имени метода записи `is` меняется на `set`.

В _Kotlin_ обращаться к свойству нужно непосредственно, а не через методы доступа.

> Синтаксис _Kotlin_ также можно использовать для доступа к свойствам классов, объявленных в _Java_. К методам чтения _Java_-класса можно обращаться как к `val`-свойствам _Kotlin_, а к парам методов чтения/записи - как к `var`-свойствам.

### Собственные методы доступа

При желании можно определить собственные методы доступа, использующие другую логику вычисления или изменения значения свойства.

``` Kotlin
class Rectangle(val height: Int, val width: Int){
	val isSquare: Boolean
    	get() = height == width
}
```

### Пакеты и каталоги

Каждый файл _Kotlin_ может иметь инструкцию `package` в начале, и все объявления будут помещены в этот пакет. Объявления из других файлов в том же пакете можно использовать напрямую, а объявления из других пакетов необходимо импортировать. Инструкция импорта помещается в начало файла и начинается с ключевого слова `import`.

_Kotlin_ не делает различия между импортом классов и функций, что позволяет импортировать любые объявления. Кроме того, можно импортировать все объявления из определенного пакета, добавив `.*` после имени пакета. _Импорт со звёздочкой_ делает видимыми также свойства и функции верхнего уровня, объявленные в данном пакете.

Можно помещать несколько классов в одном файле и выбрать любое имя для этого файла. Также  _Kotlin_ не накладывает ограничений на расположение исходных файлов в каталогах. Можно использовать любую структуру каталогов для организации своих файлов, независимо от структуры пакетов.
